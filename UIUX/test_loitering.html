<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®šé»åœç•™å¨è„…è¨ˆç®—æ¸¬è©¦</title>
</head>
<body>
    <h1>å®šé»åœç•™å¨è„…è¨ˆç®—æ¸¬è©¦</h1>
    <div id="output"></div>

    <script src="utils/vesselDataGenerator.js"></script>
    <script>
        // å‰µå»ºå¨è„…è©•åˆ†ç³»çµ±å¯¦ä¾‹
        const generator = new VesselDataGenerator();
        
        // æ¸¬è©¦è»Œè·¡é» - æ¨¡æ“¬èˆ¹éš»åœ¨æŸå€åŸŸåœç•™
        const testTrackPoints = [
            { lat: 25.0, lon: 121.0, timestamp: '2024-01-01T10:00:00Z', type: 'History', id: 'track_1' },
            { lat: 25.001, lon: 121.001, timestamp: '2024-01-01T10:15:00Z', type: 'History', id: 'track_2' }, // 15åˆ†é˜å¾Œï¼Œç§»å‹•å¾ˆå°‘ï¼ˆåœç•™ï¼‰
            { lat: 25.002, lon: 121.002, timestamp: '2024-01-01T10:30:00Z', type: 'History', id: 'track_3' }, // 30åˆ†é˜å¾Œï¼Œç§»å‹•å¾ˆå°‘ï¼ˆåœç•™ï¼‰
            { lat: 25.003, lon: 121.003, timestamp: '2024-01-01T11:00:00Z', type: 'History', id: 'track_4' }, // 60åˆ†é˜å¾Œï¼Œç§»å‹•å¾ˆå°‘ï¼ˆåœç•™ï¼‰
            { lat: 25.1, lon: 121.1, timestamp: '2024-01-01T12:00:00Z', type: 'History', id: 'track_5' }     // ç§»å‹•åˆ°é è™•
        ];

        // è¨ˆç®—å®šé»åœç•™å¨è„…
        console.log('ğŸ§ª é–‹å§‹æ¸¬è©¦å®šé»åœç•™å¨è„…è¨ˆç®—...');
        console.log('ğŸ“‹ æ¸¬è©¦è»Œè·¡é»:');
        testTrackPoints.forEach((point, index) => {
            console.log(`  é»${index+1}: (${point.lat}, ${point.lon}) æ™‚é–“: ${point.timestamp}`);
        });

        const loiteringThreat = generator.calculateLoiteringTimeThreat(testTrackPoints);
        console.log('ğŸ¯ å®šé»åœç•™å¨è„…æŒ‡æ¨™:', loiteringThreat);

        // å®Œæ•´å¨è„…åˆ†æ•¸è¨ˆç®—
        console.log('\nğŸ” å®Œæ•´å¨è„…åˆ†æ•¸è¨ˆç®—...');
        const fullThreatScore = generator.calculateThreatScoreByFormula(25.0, 121.0, testTrackPoints, 'è²¨è¼ª');
        console.log('ğŸ¯ æœ€çµ‚å¨è„…åˆ†æ•¸:', fullThreatScore);

        // å°‡çµæœé¡¯ç¤ºåœ¨ç¶²é ä¸Š
        const output = document.getElementById('output');
        output.innerHTML = `
            <h2>æ¸¬è©¦çµæœ</h2>
            <p><strong>å®šé»åœç•™å¨è„…æŒ‡æ¨™:</strong> ${loiteringThreat.toFixed(4)}</p>
            <p><strong>æœ€çµ‚å¨è„…åˆ†æ•¸:</strong> ${fullThreatScore}</p>
            <p>è«‹æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°ä»¥ç²å–è©³ç´°è¨ˆç®—éç¨‹</p>
            
            <h3>æ¸¬è©¦å ´æ™¯èªªæ˜</h3>
            <ul>
                <li>èˆ¹éš»åœ¨ (25.0, 121.0) é™„è¿‘åœç•™</li>
                <li>è»Œè·¡é»1-4é–“è·é›¢å¾ˆè¿‘ (< 0.5æµ·é‡Œ)</li>
                <li>ç¸½åœç•™æ™‚é–“ç´„ 60 åˆ†é˜</li>
                <li>æ ¹æ“šå…¬å¼ clamp((60-10)/(60-10), 0, 1) = 1.0</li>
                <li>å®šé»åœç•™å¨è„…æ‡‰è©²é”åˆ°æ»¿åˆ†</li>
            </ul>
        `;
    </script>
</body>
</html>